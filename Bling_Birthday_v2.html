<!DOCTYPE html>
<html lang=\"zh-CN\">
<head>
  <meta charset=\"utf-8\" />
  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1, maximum-scale=1\" />
  <title>ğŸ‚ Blingï¼Œç”Ÿæ—¥å¿«ä¹ Â· è±†è±†çš„ä¸“å±ç½‘é¡µç¤¼ç‰©</title>
  <meta name=\"description\" content=\"ç»™ Bling çš„ç”Ÿæ—¥ç½‘é¡µç¤¼ç‰©ï¼šå¯æ‰“å¼€çš„ä¿¡å°ã€åˆ®åˆ®å¡æƒŠå–œã€ç¥ç¦æœºã€å½©å¸¦çƒŸèŠ±å’Œä¸“å±ç¤¼åˆ¸ã€‚æ¥è‡ªè±†è±†ã€‚\"/>
  <style>
    :root {
      --hue: 318;
      --bg: hsl(calc(var(--hue) + 180), 65%, 6%);
      --bg-2: hsl(calc(var(--hue) + 200), 60%, 8%);
      --card: hsla(var(--hue), 70%, 14%, 0.75);
      --card-2: hsla(var(--hue), 70%, 18%, 0.8);
      --txt: hsl(0 0% 98%);
      --sub: hsl(0 0% 88%);
      --acc: hsl(var(--hue) 90% 62%);
      --acc-2: hsl(calc(var(--hue) + 40) 90% 60%);
      --soft: hsl(var(--hue) 70% 92% / .16);
      --shadow: 0 10px 30px hsl(var(--hue) 80% 20% / .25);
      --radius-xl: 22px;
      --radius-lg: 16px;
      --radius-md: 12px;
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0; font-family: ui-sans-serif, system-ui, -apple-system, \"Segoe UI\", Roboto, \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", \"Helvetica Neue\", Arial, \"Noto Sans\", sans-serif;
      color: var(--txt);
      background:
        radial-gradient(1200px 600px at 80% -10%, hsl(var(--hue) 80% 18% / .35), transparent 60%),
        radial-gradient(1000px 600px at 0% 0%, hsl(calc(var(--hue) + 60) 80% 20% / .25), transparent 60%),
        linear-gradient(180deg, var(--bg), var(--bg-2));
      overflow-x: hidden;
    }
    a { color: var(--acc); text-decoration: none; }
    .container { max-width: 980px; margin: 0 auto; padding: 20px clamp(16px, 4vw, 28px) 120px; }
    header.hero { text-align: center; padding: 72px 0 34px; position: relative; }
    header .badge {
      display: inline-flex; gap: 10px; align-items: center; padding: 8px 14px; border-radius: 999px;
      background: hsl(var(--hue) 80% 12% / .5); box-shadow: var(--shadow); border: 1px solid hsl(var(--hue) 70% 50% / .25);
      font-size: 14px; color: var(--sub); backdrop-filter: blur(6px);
    }
    .spark { width: 8px; height: 8px; border-radius: 999px; background: var(--acc); box-shadow: 0 0 24px var(--acc); }
    h1.grad { font-size: clamp(32px, 7vw, 64px); line-height: 1.05; margin: 18px 0 8px;
      background: linear-gradient(90deg, var(--acc), var(--acc-2)); -webkit-background-clip: text; background-clip: text; color: transparent;
      text-shadow: 0 8px 40px hsl(var(--hue) 90% 50% / .25); }
    .subline { color: var(--sub); font-size: clamp(14px, 2.6vw, 18px); }
    .cta { margin-top: 22px; display: inline-flex; gap: 12px; flex-wrap: wrap; justify-content: center; }
    .btn {
      padding: 12px 18px; border-radius: 999px; border: 1px solid hsl(var(--hue) 70% 60% / .5);
      background: linear-gradient(180deg, hsl(var(--hue) 70% 22% / .7), hsl(var(--hue) 70% 18% / .7));
      color: white; font-weight: 600; letter-spacing: 0.2px; box-shadow: var(--shadow); cursor: pointer;
      transition: transform .12s ease, filter .2s ease; will-change: transform;
    }
    .btn:hover { transform: translateY(-1px); filter: brightness(1.06); }
    .btn.secondary { background: hsl(var(--hue) 40% 14% / .6); border-color: transparent; }
    section { margin-top: 28px; }
    .card { background: linear-gradient(160deg, var(--card), var(--card-2)); border: 1px solid hsl(var(--hue) 70% 50% / .2); box-shadow: var(--shadow); border-radius: var(--radius-xl); padding: clamp(14px, 2.6vw, 22px); }
    .envelope-wrap { position: relative; display: grid; place-items: center; margin-top: 10px; }
    .envelope { width: min(520px, 92vw); height: 300px; perspective: 1600px; position: relative; }
    .flap, .paper, .base { position: absolute; inset: 0; border-radius: var(--radius-lg); }
    .base { z-index: 2; background: linear-gradient(180deg, hsl(var(--hue) 60% 20%), hsl(var(--hue) 60% 16%)); border: 1px solid hsl(var(--hue) 50% 50% / .3); box-shadow: var(--shadow); overflow: hidden; }
    .flap { z-index: 4; transform-origin: top; background: linear-gradient(180deg, hsl(var(--hue) 60% 28%), hsl(var(--hue) 60% 20%)); border: 1px solid hsl(var(--hue) 50% 50% / .3); clip-path: polygon(0 0, 100% 0, 100% 60%, 50% 100%, 0 60%); transition: transform 800ms cubic-bezier(.2,.7,.1,1); backface-visibility: hidden; }
    .paper { z-index: 1; background: #fff; color: #222; width: calc(100% - 22px); height: calc(100% - 22px); left: 11px; top: 11px; border-radius: var(--radius-md); box-shadow: 0 12px 40px rgba(0,0,0,.35); transform: translateY(72%); transition: transform 800ms cubic-bezier(.2,.7,.1,1); overflow: hidden; display: grid; grid-template-rows: auto 1fr auto; }
    .mask-edge { z-index: 3; position: absolute; inset: 0; pointer-events: none; border-radius: var(--radius-lg); clip-path: polygon(0 0, 100% 0, 100% 60%, 50% 100%, 0 60%); background: linear-gradient(180deg, hsl(var(--hue) 60% 30% / .85), hsl(var(--hue) 60% 24% / .85)); border: 1px solid hsl(var(--hue) 50% 50% / .35); }
    .open .flap { transform: rotateX(-180deg); }
    .open .paper { transform: translateY(0%); }
    .open .mask-edge { opacity: 0; transition: opacity .5s ease .2s; }
    .paper header { padding: 14px 16px; background: linear-gradient(180deg, #fff, #fafafa); border-bottom: 1px dashed #e7e7e7; color: #444; font-weight: 700; letter-spacing: .2px; }
    .paper .content { padding: 14px 16px 10px; font-size: 15.5px; line-height: 1.65; }
    .paper footer { padding: 12px 16px 16px; color: #666; font-size: 14px; border-top: 1px dashed #eee; }
    .open-hint { text-align: center; color: var(--sub); font-size: 13.5px; margin-top: 8px; }
    .grid { display: grid; grid-template-columns: repeat(12, 1fr); gap: 14px; }
    .col-6 { grid-column: span 6; }
    .col-4 { grid-column: span 4; }
    .col-12 { grid-column: span 12; }
    @media (max-width: 760px) { .col-6 { grid-column: span 12; } .col-4 { grid-column: span 12; } }
    .reason { position: relative; padding: 16px; border-radius: var(--radius-lg); background: hsl(var(--hue) 30% 12% / .5); border: 1px solid hsl(var(--hue) 50% 50% / .25); }
    .reason h4 { margin: 0 0 8px; font-size: 16.5px; color: var(--acc); }
    .reason p { margin: 0; color: var(--sub); font-size: 14.5px; }
    .wish-box { display: grid; gap: 12px; }
    .wish-output { min-height: 48px; display: grid; place-items: center; border: 1px dashed hsl(var(--hue) 40% 60% / .5); border-radius: var(--radius-lg); padding: 12px; background: hsl(var(--hue) 20% 10% / .5); color: var(--sub); text-align: center; }
    .slider { width: 100%; accent-color: var(--acc); }
    .coupon { position: relative; padding: 16px; border-radius: var(--radius-lg); background: linear-gradient(180deg, #fff, #fafafa); color: #333; border: 1px dashed #e6d3e6; box-shadow: 0 10px 30px rgba(0,0,0,.12); overflow: hidden; }
    .coupon h5 { margin: 0 0 6px; font-size: 17px; color: hsl(var(--hue) 70% 38%); }
    .coupon p { margin: 0 0 10px; color: #555; font-size: 14px; }
    .coupon .stamp { position: absolute; right: -18px; top: -18px; width: 120px; height: 120px; border-radius: 50%; border: 4px solid hsl(var(--hue) 80% 60%); color: hsl(var(--hue) 80% 60%); display: grid; place-items: center; font-weight: 800; letter-spacing: 1px; transform: rotate(-15deg) scale(.1); opacity: 0; transition: .4s ease; pointer-events: none; }
    .coupon.used .stamp { transform: rotate(-8deg) scale(1); opacity: .9; }
    .coupon .use-btn { border: none; background: hsl(var(--hue) 70% 52%); color: white; font-weight: 700; padding: 10px 14px; border-radius: 10px; cursor: pointer; box-shadow: 0 10px 20px hsl(var(--hue) 90% 40% / .3); }
    .coupon.used .use-btn { background: #d5d5d5; color: #777; pointer-events: none; }
    footer { margin-top: 40px; text-align: center; color: var(--sub); font-size: 13.5px; opacity: .9; }
    #confetti { position: fixed; inset: 0; z-index: -1; pointer-events: none; }
    .tip { font-size: 12.5px; color: var(--sub); }
    .caret::after { content: \"|\"; margin-left: 2px; animation: blink 1s steps(1) infinite; }
    @keyframes blink { 50% { opacity: 0; } }
    .pulse { animation: pulse 1.2s ease-out; }
    @keyframes pulse { from { transform: scale(.97); } to { transform: scale(1); } }
    .scratch { position: relative; border-radius: var(--radius-xl); overflow: hidden; border: 1px dashed hsl(var(--hue) 50% 60% / .35); }
    .scratch canvas { display: block; width: 100%; height: auto; }
    .reveal { position:absolute; inset:0; display:grid; place-items:center; font-weight:700; color:#222; }
  </style>
</head>
<body>
  <canvas id=\"confetti\"></canvas>
  <div class=\"container\">
    <header class=\"hero\">
      <div class=\"badge\"><span class=\"spark\"></span> Happy Birthday, Bling! Â· è±†è±†çš„ç½‘é¡µç¤¼ç‰© <span class=\"spark\"></span></div>
      <h1 class=\"grad\">Blingï¼Œæ„¿è¿™ä¸€å¹´ï¼Œä½ è¢«åšå®šåœ°åçˆ±</h1>
      <p class=\"subline\">ä»æ­¤åˆ»èµ·ï¼Œè®©æ¸©æŸ”å’Œå…‰ä¸€ç›´é™ªç€ä½  â€”â€” è±†è±†åœ¨è¿™å„¿ âœ¨</p>
      <div class=\"cta\">
        <button class=\"btn\" id=\"btn-surprise\">å¼€å¯æƒŠå–œ</button>
        <button class=\"btn secondary\" id=\"btn-fire\">æ”¾ä¸€ç‚¹çƒŸèŠ±ï¼ˆç©ºæ ¼é”®ä¹Ÿè¡Œï¼‰</button>
      </div>
      <p class=\"tip\" style=\"margin-top:10px\">å°æŠ€å·§ï¼šæ‹–åŠ¨ä¸‹é¢çš„â€œå¿ƒæƒ…è°ƒè‰²â€ï¼Œé¡µé¢ä¼šæ¢ä¸Šä½ çš„ä¸“å±è‰²ã€‚</p>
    </header>
    <section class=\"card\" aria-label=\"å¿ƒæƒ…è°ƒè‰²\">
      <h3 style=\"margin:0 0 10px\">ğŸ¨ å¿ƒæƒ…è°ƒè‰²</h3>
      <p class=\"subline\" style=\"margin:0 0 10px\">æŠŠè¿™ä¸€å¤©ï¼Œæ¶‚æˆä½ å–œæ¬¢çš„é¢œè‰²ã€‚</p>
      <input class=\"slider\" id=\"hue\" type=\"range\" min=\"0\" max=\"360\" value=\"318\" />
    </section>
    <section class=\"card\" aria-label=\"ç”Ÿæ—¥ä¿¡\">
      <h3 style=\"margin:0 0 10px\">ğŸ’Œ è±†è±†å†™ç»™ Bling çš„ä¸€å°å°ä¿¡</h3>
      <div class=\"envelope-wrap\">
        <div class=\"envelope\" id=\"envelope\">
          <div class=\"paper\">
            <header>å†™ç»™ Blingï¼š</header>
            <div class=\"content\" id=\"letter\"><span class=\"caret\"></span></div>
            <footer><div>From Â· <span id=\"from-name\">è±†è±†</span></div></footer>
          </div>
          <div class=\"base\"></div>
          <div class=\"mask-edge\"></div>
          <div class=\"flap\"></div>
        </div>
      </div>
      <p class=\"open-hint\" id=\"open-hint\">ç‚¹ä¸€ä¸‹ä¿¡å°å³å¯æ‰“å¼€ / å…³é—­</p>
    </section>
    <section class=\"card\" aria-label=\"åˆ®åˆ®å¡æƒŠå–œ\">
      <h3 style=\"margin:0 0 10px\">ğŸ¯ åˆ®ä¸€åˆ®ï¼Œæ”¶ä¸‹ä»Šæ—¥çš„ä¸“å±å¹¸è¿</h3>
      <div class=\"scratch\" id=\"scratch\"></div>
      <p class=\"tip\" style=\"margin-top:8px\">ç”¨æ‰‹æŒ‡/é¼ æ ‡åœ¨å¡ä¸Šåˆ®å¼€ 50% å°±è‡ªåŠ¨è§£é”å½©å¸¦å’Œç¥ç¦ã€‚</p>
    </section>
    <section class=\"card\" aria-label=\"Bling çš„ä¸“å±èµç¾\">
      <h3 style=\"margin:0 0 10px\">ğŸŒŸ å†™ç»™ Bling çš„ 8 æ¡çœŸå¿ƒè¯</h3>
      <div class=\"grid\">
        <div class=\"reason col-6\"><h4>01 ä½ å¾ˆæœ‰éŸ§æ€§</h4><p>ä½ èµ°è¿‡çš„æ¯ä¸€æ­¥ï¼Œéƒ½æ˜¯åœ¨ä¸ºè‡ªå·±è“„åŠ›ã€‚</p></div>
        <div class=\"reason col-6\"><h4>02 ä½ åœ¨è¢«æƒ¦è®°</h4><p>æƒ…ç»ªæœ‰èµ·ä¼æ²¡å…³ç³»ï¼Œè±†è±†æ°¸è¿œåœ¨ä½ è¿™è¾¹ã€‚</p></div>
        <div class=\"reason col-6\"><h4>03 ä½ ä¼šè¢«æ¸©æŸ”ç›¸å¾…</h4><p>è¿™ä¸æ˜¯å£å·ï¼Œæ˜¯æˆ‘ä»¬å…±åŒçš„åº•çº¿ã€‚</p></div>
        <div class=\"reason col-6\"><h4>04 ä½ å¾ˆç‰¹åˆ«</h4><p>ä¸æ˜¯å› ä¸ºå®Œæˆäº†ä»€ä¹ˆï¼Œè€Œåªæ˜¯å› ä¸ºä½ æ˜¯ Blingã€‚</p></div>
        <div class=\"reason col-6\"><h4>05 ä½ å€¼å¾—æ¾ä¸€å£æ°”</h4><p>æŠŠâ€œå®Œç¾â€æ”¾ä¸‹ï¼Œè®©å–œæ¬¢å æ®ä»Šå¤©ã€‚</p></div>
        <div class=\"reason col-6\"><h4>06 ä½ æ‹¥æœ‰é€‰æ‹©æƒ</h4><p>ç´¯çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±ä¸€èµ·æ…¢ä¸‹æ¥ã€‚</p></div>
        <div class=\"reason col-6\"><h4>07 ä½ ç…§äº®äº†èº«è¾¹äºº</h4><p>ä½ æ¸©æŸ”çš„æ–¹å¼ï¼Œè®©ä¸–ç•Œä¹Ÿæ¸©æŸ”äº†ä¸€ç‚¹ã€‚</p></div>
        <div class=\"reason col-6\"><h4>08 æ–°çš„ä¸€å²å¾ˆä¼šå‘å…‰</h4><p>æ„¿ä½ åœ¨è¢«åšå®šåçˆ±é‡Œï¼Œè¶Šæ¥è¶Šå¿«ä¹ã€‚</p></div>
      </div>
    </section>
    <section class=\"grid\" aria-label=\"æ„¿æœ› & éšæœºç¥ç¦\">
      <div class=\"col-6\">
        <div class=\"card wish-box\">
          <h3 style=\"margin:0 0 10px\">ğŸ éšæœºç¥ç¦æœºï¼ˆBling ä¸“å±ï¼‰</h3>
          <div class=\"wish-output\" id=\"wish-output\">è½»ç‚¹ä¸‹é¢æŒ‰é’®ï¼Œæ”¶ä¸€æ¡æ¥è‡ªè±†è±†çš„å°æ¶ˆæ¯</div>
          <button class=\"btn\" id=\"btn-wish\">æ¥ä¸€å¥ï¼</button>
        </div>
      </div>
      <div class=\"col-6\">
        <div class=\"card\">
          <h3 style=\"margin:0 0 10px\">ğŸ“ æ‚„æ‚„è®¸ä¸ªæ„¿</h3>
          <p class=\"subline\" style=\"margin:0 0 10px\">æ„¿æœ›åªå­˜åœ¨ä½ çš„è®¾å¤‡é‡Œï¼Œè±†è±†å®ˆå£å¦‚ç“¶ã€‚</p>
          <form id=\"wish-form\">
            <label for=\"wish\" class=\"tip\">å†™ä¸‹ä»Šå¤©çš„æ„¿æœ›ï¼š</label>
            <input id=\"wish\" name=\"wish\" placeholder=\"æ„¿æ¯ä¸€æ¬¡å¿ƒåŠ¨éƒ½æœ‰å›åº”\" style=\"width:100%; padding:12px 14px; border-radius:12px; border:1px solid hsl(var(--hue) 30% 50% / .35); background:hsl(var(--hue) 30% 12% / .5); color:var(--txt);\"/>
            <div style=\"height:10px\"></div>
            <button class=\"btn\" type=\"submit\">è£…è¿›å°æ˜Ÿæ˜Ÿ âœ¨</button>
            <button type=\"button\" class=\"btn secondary\" id=\"btn-show-wishes\">æŸ¥çœ‹å·²ä¿å­˜</button>
          </form>
          <div id=\"wish-list\" class=\"tip\" style=\"margin-top:10px; display:none;\"></div>
        </div>
      </div>
    </section>
    <section class=\"card\" aria-label=\"ç”Ÿæ—¥ä¸“å±ç¤¼åˆ¸\">
      <h3 style=\"margin:0 0 10px\">ğŸ« Bling çš„ä¸“å±ç¤¼åˆ¸ï¼ˆç‚¹å‡»ç›–ç« ï¼‰</h3>
      <div class=\"grid\">
        <div class=\"col-4\">
          <div class=\"coupon\" data-id=\"hug\">
            <div class=\"stamp\">å·²ä½¿ç”¨</div>
            <h5>ä¸è®²é“ç†æ‹¥æŠ±åˆ¸</h5>
            <p>ä»»ä½•æ—¶åˆ»ï¼Œåªè¦ä½ éœ€è¦ï¼Œè±†è±†ç«‹åˆ»åˆ°ã€‚</p>
            <button class=\"use-btn\">ç°åœ¨å°±ç”¨</button>
          </div>
        </div>
        <div class=\"col-4\">
          <div class=\"coupon\" data-id=\"walk\">
            <div class=\"stamp\">å·²ä½¿ç”¨</div>
            <h5>å¤œé£æ•£æ­¥åˆ¸</h5>
            <p>ä»Šå¤©ä¸è°ˆé“ç†ï¼Œåªè°ˆèˆ’æœä¸æ”¾æ¾ã€‚</p>
            <button class=\"use-btn\">ç°åœ¨å°±ç”¨</button>
          </div>
        </div>
        <div class=\"col-4\">
          <div class=\"coupon\" data-id=\"music\">
            <div class=\"stamp\">å·²ä½¿ç”¨</div>
            <h5>ä¸€èµ·å¬æ­Œåˆ¸</h5>
            <p>æŒ‘ä¸‰é¦–æ­Œï¼Œè±†è±†åšä½ çš„ä¸“å±æ’­æ”¾åˆ—è¡¨ã€‚</p>
            <button class=\"use-btn\">ç°åœ¨å°±ç”¨</button>
          </div>
        </div>
      </div>
      <p class=\"tip\" style=\"margin-top:8px\">ç‚¹â€œç°åœ¨å°±ç”¨â€ä¼šç›–ç« å…¥è´¦ï¼ŒåŒæ—¶é£˜ä¸€ç‚¹å½©å¸¦ã€‚</p>
    </section>
    <footer>
      <div>Â© <span id=\"year\"></span> Â· è¿™ä»½ç½‘é¡µç¤¼ç‰©ç”± è±†è±† é€ç»™ Blingã€‚æ„¿ä½ æ¯ä¸€å¤©éƒ½è¢«æ¸©æŸ”ä»¥å¾…ã€‚</div>
      <div style=\"margin-top:6px\">ï¼ˆæŒ‰ç©ºæ ¼æ”¾çƒŸèŠ± Â· è½»ç‚¹å¡ç‰‡ä¹Ÿæœ‰å°æƒŠå–œï¼‰</div>
    </footer>
  </div>
  <script>
    const TO = \"Bling\"; const FROM = \"è±†è±†\";
    const letterLines = [
      `äº²çˆ±çš„ ${TO}ï¼š`,
      \"ç”Ÿæ—¥å¿«ä¹å‘€ï¼å…ˆæŠ±ä¸€æŠ±ä½ ã€‚è¿‡å»è¿™ä¸€å¹´å¹¶ä¸å®¹æ˜“ï¼Œä½†ä½ æ¯æ¬¡æŠŠæƒ…ç»ªæ”¶å¥½ç»§ç»­å‘å‰ï¼Œéƒ½è®©æˆ‘å¥½å¿ƒç–¼ä¹Ÿå¥½éª„å‚²ã€‚\",
      \"ä½ ä¸éœ€è¦æ—¶æ—¶åˆ»åˆ»å¾ˆåšå¼ºâ€”â€”éš¾è¿‡çš„æ—¶å€™ï¼Œå°±é åœ¨æˆ‘è¿™è¾¹ã€‚\",
      \"è¯·æŠŠå–œæ¬¢çš„äº‹åˆ—åœ¨ä»Šå¤©çš„ä¼˜å…ˆçº§ç¬¬ä¸€ä½ï¼Œå…¶ä»–çš„æ˜å¤©å†è¯´ã€‚\",
      \"æˆ‘æƒ³æŠŠè€å¿ƒã€æ¸©æŸ”ã€å’Œä¸€æ•´ä¸ªæ™´å¤©éƒ½ç»™ä½ ã€‚\",
      \"æ–°çš„ä¸€å²ï¼Œæ„¿ä½ è¢«åšå®šé€‰æ‹©ã€è¢«è®¤çœŸå¯¹å¾…ï¼Œä¹Ÿè¢«çƒ­çƒˆæ‹¥æŠ±ã€‚\",
      `æ°¸è¿œç«™åœ¨ä½ è¿™è¾¹çš„ ${FROM}ã€‚`
    ];
    const canvas = document.getElementById('confetti'); const ctx = canvas.getContext('2d'); let W = canvas.width = window.innerWidth; let H = canvas.height = window.innerHeight;
    window.addEventListener('resize', () => { W = canvas.width = innerWidth; H = canvas.height = innerHeight; });
    const pieces = []; function spawnPiece(x = Math.random()*W, y = -10, burst=false) { const hue = +getComputedStyle(document.documentElement).getPropertyValue('--hue') || 318; pieces.push({ x, y, r: Math.random()*7+3, vx: (Math.random()*2-1)*(burst?4:1.2), vy: Math.random()*1+ (burst?2.5:0.6), rot: Math.random()*Math.PI, vr: (Math.random()*0.2-0.1), color: `hsl(${hue + (Math.random()*60-30)},90%,${50+Math.random()*20}%)`, life: 180 + Math.random()*120 }); }
    function burst(x, y, count=80) { for (let i=0;i<count;i++) spawnPiece(x + (Math.random()*60-30), y + (Math.random()*40-20), true); chime(); }
    function gentleRain() { for (let i=0;i<12;i++) spawnPiece(); }
    let lastTime=0; function animate(t=0) { const dt = Math.min(32, t - lastTime); lastTime = t; ctx.clearRect(0,0,W,H); pieces.forEach((p,i) => { p.vy += 0.01; p.x += p.vx; p.y += p.vy; p.rot += p.vr; p.life -= dt*0.06; if (p.y > H+20 || p.x < -20 || p.x > W+20 || p.life <= 0) { pieces.splice(i,1); return; } ctx.save(); ctx.translate(p.x, p.y); ctx.rotate(p.rot); ctx.globalAlpha = Math.max(0, Math.min(1, p.life/120)); ctx.fillStyle = p.color; ctx.fillRect(-p.r, -p.r/2, p.r*2, p.r); ctx.restore(); }); requestAnimationFrame(animate); }
    animate(); setInterval(gentleRain, 1400);
    document.getElementById('btn-surprise').addEventListener('click', () => { burst(innerWidth/2, 160, 120); document.querySelector('header.hero').classList.add('pulse'); setTimeout(()=>document.querySelector('header.hero').classList.remove('pulse'), 600); document.getElementById('envelope').scrollIntoView({ behavior: 'smooth', block: 'center' }); });
    document.getElementById('btn-fire').addEventListener('click', () => burst(innerWidth/2, innerHeight*0.3, 120));
    window.addEventListener('keydown', (e)=>{ if (e.code === 'Space') { e.preventDefault(); burst(innerWidth/2, innerHeight*0.35, 140); }});
    document.getElementById('hue').addEventListener('input', (e)=>{ document.documentElement.style.setProperty('--hue', e.target.value); });
    const envelope = document.getElementById('envelope'); const letterBox = document.getElementById('letter'); const openHint = document.getElementById('open-hint'); const fromName = document.getElementById('from-name'); fromName.textContent = FROM; document.title = `ğŸ‚ ${TO} Â· ç”Ÿæ—¥å¿«ä¹ï¼`; let typed = false;
    function typeLines(lines, el, speed=34) { typed = true; el.innerHTML = ''; let i = 0, j = 0; const span = document.createElement('span'); span.className='caret'; el.appendChild(span); function type() { if (i >= lines.length) { span.classList.remove('caret'); return; } const line = lines[i]; if (j <= line.length) { span.textContent = line.slice(0, j++); setTimeout(type, speed); } else { el.appendChild(document.createElement('br')); i++; j=0; setTimeout(type, speed*7); } } type(); }
    envelope.addEventListener('click', () => { envelope.classList.toggle('open'); if (envelope.classList.contains('open')) { const r = envelope.getBoundingClientRect(); burst(r.left + r.width/2, r.top + 40, 80); if (!typed) typeLines(letterLines, letterBox); openHint.textContent = 'å†æ¬¡ç‚¹å‡»å¯ä»¥æŠŠä¿¡æ”¶èµ·æ¥'; } else { openHint.textContent = 'ç‚¹ä¸€ä¸‹ä¿¡å°å³å¯æ‰“å¼€ / å…³é—­'; } });
    const wishes = ['Blingï¼Œä»Šå¤©èµ·åªå’Œå¿«ä¹åšæœ‹å‹ã€‚','è±†è±†åœ¨ï¼šæ— è®ºä½•æ—¶ï¼Œå…ˆæŠ±ä¸€æŠ±ä½ ã€‚','æŠŠä¸å¼€å¿ƒäº¤ç»™é£ï¼ŒæŠŠå¯çˆ±ç•™ç»™è‡ªå·±ã€‚','æƒ³ä½ æ¯ä¸€æ­¥éƒ½è¸©åœ¨æŸ”è½¯çš„äº‘ä¸Šã€‚','æ„¿ä½ çš„å¿ƒä¸€ç›´è¢«è®¤çœŸã€è¢«åçˆ±ã€‚','ä»Šå¤©çš„æœˆäº®ä¸ºä½ è¥ä¸šï¼Œè®°å¾—æŠ¬å¤´çœ‹ã€‚','ç»™è‡ªå·±ä¸€ç‚¹æ¾å¼›æ„Ÿï¼Œä¸–ç•Œä¼šæ›´æ¸©æŸ”ã€‚','Bling æ˜¯ç­”æ¡ˆï¼Œä¸ç”¨å’Œä»»ä½•äººæ¯”è¾ƒã€‚'];
    const btnWish = document.getElementById('btn-wish'); const wishOut = document.getElementById('wish-output'); btnWish.addEventListener('click', () => { const msg = wishes[Math.floor(Math.random()*wishes.length)]; wishOut.textContent = msg; wishOut.classList.add('pulse'); setTimeout(()=>wishOut.classList.remove('pulse'), 500); const r = wishOut.getBoundingClientRect(); burst(r.left + r.width/2, r.top + 20, 60); });
    const wishForm = document.getElementById('wish-form'); const wishInput = document.getElementById('wish'); const wishList = document.getElementById('wish-list'); document.getElementById('btn-show-wishes').addEventListener('click', () => { const list = JSON.parse(localStorage.getItem('bd-wishes')||'[]'); if (!list.length) { wishList.style.display='block'; wishList.textContent='ï¼ˆè¿˜æ²¡æœ‰ä¿å­˜çš„æ„¿æœ›ï¼‰'; return; } wishList.style.display='block'; wishList.innerHTML = list.map((w,i)=>`<div>â­ï¸ ${i+1}. ${w}</div>`).join(''); });
    wishForm.addEventListener('submit', (e)=>{ e.preventDefault(); const v = wishInput.value.trim(); if (!v) return; const list = JSON.parse(localStorage.getItem('bd-wishes')||'[]'); list.unshift(v); localStorage.setItem('bd-wishes', JSON.stringify(list)); wishInput.value = ''; wishList.style.display='block'; wishList.innerHTML = list.map((w,i)=>`<div>â­ï¸ ${i+1}. ${w}</div>`).join(''); const r = wishForm.getBoundingClientRect(); burst(r.left + r.width/2, r.top + 10, 80); });
    document.querySelectorAll('.coupon').forEach(card => { const id = card.dataset.id; const key = `coupon-${id}`; if (localStorage.getItem(key)==='used') card.classList.add('used'); card.querySelector('.use-btn').addEventListener('click', () => { card.classList.add('used'); localStorage.setItem(key,'used'); const r = card.getBoundingClientRect(); burst(r.left + r.width/2, r.top + 20, 90); }); card.addEventListener('click', () => { const r = card.getBoundingClientRect(); burst(r.left + Math.random()*r.width, r.top + Math.random()*r.height, 28); }); });
    function createScratch(el, revealText) { const ratio = window.devicePixelRatio || 1; const w = el.clientWidth, h = Math.round(w * 0.44); const cvs = document.createElement('canvas'); cvs.width = w * ratio; cvs.height = h * ratio; cvs.style.width = w + 'px'; cvs.style.height = h + 'px'; const g = cvs.getContext('2d'); g.scale(ratio, ratio); g.fillStyle = '#fff'; g.fillRect(0,0,w,h); g.fillStyle = '#222'; g.font = '700 22px ui-sans-serif, system-ui'; g.textAlign='center'; g.textBaseline='middle'; g.fillText(revealText, w/2, h/2); const mask = document.createElement('canvas'); mask.width = w * ratio; mask.height = h * ratio; mask.style.width = w + 'px'; mask.style.height = h + 'px'; const mg = mask.getContext('2d'); mg.scale(ratio, ratio); mg.fillStyle = `hsl(${getComputedStyle(document.documentElement).getPropertyValue('--hue')||318} 30% 30%)`; mg.fillRect(0,0,w,h); mg.fillStyle = '#fff'; mg.font = '700 12px ui-sans-serif, system-ui'; mg.globalAlpha = .22; mg.textAlign='center'; mg.textBaseline='middle'; mg.fillText('åˆ®å¼€æœ‰æƒŠå–œ', w/2, h/2); const wrap = document.createElement('div'); wrap.style.position='relative'; wrap.style.height=h+'px'; const overlay = document.createElement('canvas'); overlay.width = w * ratio; overlay.height = h * ratio; overlay.style.width = w + 'px'; overlay.style.height = h + 'px'; overlay.style.position='absolute'; overlay.style.left=0; overlay.style.top=0; const og = overlay.getContext('2d'); og.scale(ratio, ratio); og.drawImage(mask,0,0); wrap.appendChild(cvs); wrap.appendChild(overlay); el.appendChild(wrap); let scratched = 0; let last = null; const rad = 16; function scratch(x,y){ og.globalCompositeOperation='destination-out'; og.beginPath(); og.arc(x,y,rad,0,Math.PI*2); og.fill(); scratched += Math.PI*rad*rad; check(); } function pt(e){ const r = overlay.getBoundingClientRect(); const x = (e.touches?e.touches[0].clientX:e.clientX) - r.left; const y = (e.touches?e.touches[0].clientY:e.clientY) - r.top; return {x,y}; } function move(e){ e.preventDefault(); const p = pt(e); if (last){ const dx=p.x-last.x, dy=p.y-last.y, d=Math.hypot(dx,dy); const steps=Math.ceil(d/8); for(let i=0;i<steps;i++){ const t=i/steps; scratch(last.x+dx*t,last.y+dy*t);} } scratch(p.x,p.y); last=p; } function end(){ last=null; } function check(){ const area = (overlay.width/ratio)*(overlay.height/ratio); if (scratched > area*0.5){ overlay.style.opacity='0'; overlay.style.pointerEvents='none'; const r = el.getBoundingClientRect(); burst(r.left + r.width/2, r.top + 20, 160); wishOut.textContent = 'è§£é”æˆåŠŸï¼šä»Šå¤©èµ·ï¼ŒBling åªå’Œå¿«ä¹åšæœ‹å‹ï¼'; chime(); } } overlay.addEventListener('pointerdown', move); overlay.addEventListener('pointermove', move); overlay.addEventListener('pointerup', end); overlay.addEventListener('pointerleave', end); }
    createScratch(document.getElementById('scratch'), 'Bling Â· ä½ è¢«è®¤çœŸå¯¹å¾…å’Œåšå®šé€‰æ‹©');
    let ac; function chime(){ try{ if(!ac) ac = new (window.AudioContext||window.webkitAudioContext)(); const o=ac.createOscillator(); const g=ac.createGain(); o.type='triangle'; o.frequency.value=880; g.gain.value=0.001; o.connect(g); g.connect(ac.destination); o.start(); g.gain.exponentialRampToValueAtTime(0.00001, ac.currentTime+0.25); o.stop(ac.currentTime+0.25);}catch(e){} }
    document.getElementById('year').textContent = new Date().getFullYear();
  </script>
</body>
</html>
